<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Generator Software Documentation: Gantry Interface Module.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Generator Software Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#pub-slot-members">Public Slots</a>  </div>
  <div class="headertitle"><div class="title">Gantry Interface Module.</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_socket_item.html">SocketItem</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This Class implements a TcpIp Serve socket, running in a separate thread.  <a href="class_socket_item.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_server.html">Server</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class resides into the Main Thread and implements the communication protocol with the Gantry.  <a href="class_server.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gadb5ca8920cd50a220379296dfe2e6de0"><td class="memItemLeft" align="right" valign="top">QList&lt; QString &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#gadb5ca8920cd50a220379296dfe2e6de0">Server::SetExposurePre</a> (QList&lt; QString &gt; *command)</td></tr>
<tr class="memdesc:gadb5ca8920cd50a220379296dfe2e6de0"><td class="mdescLeft">&#160;</td><td class="mdescRight">SetExposurePre.  <a href="group___interface_module.html#gadb5ca8920cd50a220379296dfe2e6de0">More...</a><br /></td></tr>
<tr class="separator:gadb5ca8920cd50a220379296dfe2e6de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7155df23582515b6810a60087a2c41d"><td class="memItemLeft" align="right" valign="top">QList&lt; QString &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#gab7155df23582515b6810a60087a2c41d">Server::SetExposurePulse</a> (QList&lt; QString &gt; *command)</td></tr>
<tr class="memdesc:gab7155df23582515b6810a60087a2c41d"><td class="mdescLeft">&#160;</td><td class="mdescRight">SetExposurePulse.  <a href="group___interface_module.html#gab7155df23582515b6810a60087a2c41d">More...</a><br /></td></tr>
<tr class="separator:gab7155df23582515b6810a60087a2c41d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga509050dae49f7a78cbc974f6c4ddb94b"><td class="memItemLeft" align="right" valign="top">QList&lt; QString &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga509050dae49f7a78cbc974f6c4ddb94b">Server::SetExposureTestPulse</a> (QList&lt; QString &gt; *command)</td></tr>
<tr class="memdesc:ga509050dae49f7a78cbc974f6c4ddb94b"><td class="mdescLeft">&#160;</td><td class="mdescRight">SetExposureTestPulse.  <a href="group___interface_module.html#ga509050dae49f7a78cbc974f6c4ddb94b">More...</a><br /></td></tr>
<tr class="separator:ga509050dae49f7a78cbc974f6c4ddb94b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga776a27e6d208ae33ec73c7b26e4fa108"><td class="memItemLeft" align="right" valign="top">QList&lt; QString &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga776a27e6d208ae33ec73c7b26e4fa108">Server::SetTomoConfig</a> (QList&lt; QString &gt; *command)</td></tr>
<tr class="memdesc:ga776a27e6d208ae33ec73c7b26e4fa108"><td class="mdescLeft">&#160;</td><td class="mdescRight">SetTomoConfig.  <a href="group___interface_module.html#ga776a27e6d208ae33ec73c7b26e4fa108">More...</a><br /></td></tr>
<tr class="separator:ga776a27e6d208ae33ec73c7b26e4fa108"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9264416ca8eec95129b90b5ecc31e03a"><td class="memItemLeft" align="right" valign="top">QList&lt; QString &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga9264416ca8eec95129b90b5ecc31e03a">Server::StartExposure</a> (QList&lt; QString &gt; *command)</td></tr>
<tr class="memdesc:ga9264416ca8eec95129b90b5ecc31e03a"><td class="mdescLeft">&#160;</td><td class="mdescRight">StartExposure.  <a href="group___interface_module.html#ga9264416ca8eec95129b90b5ecc31e03a">More...</a><br /></td></tr>
<tr class="separator:ga9264416ca8eec95129b90b5ecc31e03a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5628fb285275e4bed327cc744a2dda72"><td class="memItemLeft" align="right" valign="top">QList&lt; QString &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga5628fb285275e4bed327cc744a2dda72">Server::AbortExposure</a> (QList&lt; QString &gt; *command)</td></tr>
<tr class="memdesc:ga5628fb285275e4bed327cc744a2dda72"><td class="mdescLeft">&#160;</td><td class="mdescRight">AbortExposure.  <a href="group___interface_module.html#ga5628fb285275e4bed327cc744a2dda72">More...</a><br /></td></tr>
<tr class="separator:ga5628fb285275e4bed327cc744a2dda72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa30eba1ca1ddc4516dd11c20befbeb7d"><td class="memItemLeft" align="right" valign="top">QList&lt; QString &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#gaa30eba1ca1ddc4516dd11c20befbeb7d">Server::GetPostExposure</a> (QList&lt; QString &gt; *command)</td></tr>
<tr class="memdesc:gaa30eba1ca1ddc4516dd11c20befbeb7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">GetPostExposure.  <a href="group___interface_module.html#gaa30eba1ca1ddc4516dd11c20befbeb7d">More...</a><br /></td></tr>
<tr class="separator:gaa30eba1ca1ddc4516dd11c20befbeb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa86610df791c20316db0f6a5865b380e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#gaa86610df791c20316db0f6a5865b380e">Server::EventMessage</a> (ushort seq, QString msg)</td></tr>
<tr class="memdesc:gaa86610df791c20316db0f6a5865b380e"><td class="mdescLeft">&#160;</td><td class="mdescRight">EventMessage.  <a href="group___interface_module.html#gaa86610df791c20316db0f6a5865b380e">More...</a><br /></td></tr>
<tr class="separator:gaa86610df791c20316db0f6a5865b380e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaddcf172531df8b07034e8e014ea96850"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#gaddcf172531df8b07034e8e014ea96850">Server::EventSetXrayEna</a> (ushort seq, bool state)</td></tr>
<tr class="memdesc:gaddcf172531df8b07034e8e014ea96850"><td class="mdescLeft">&#160;</td><td class="mdescRight">EventSetXrayEna.  <a href="group___interface_module.html#gaddcf172531df8b07034e8e014ea96850">More...</a><br /></td></tr>
<tr class="separator:gaddcf172531df8b07034e8e014ea96850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84af59ce04a2793f2c05d1c47928b8dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga84af59ce04a2793f2c05d1c47928b8dc">Server::EventGetPulseData</a> (ushort seq)</td></tr>
<tr class="memdesc:ga84af59ce04a2793f2c05d1c47928b8dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">EventGetPulseData.  <a href="group___interface_module.html#ga84af59ce04a2793f2c05d1c47928b8dc">More...</a><br /></td></tr>
<tr class="separator:ga84af59ce04a2793f2c05d1c47928b8dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad2b9cbeccf94f41a9ea16d2966c32c33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#gad2b9cbeccf94f41a9ea16d2966c32c33">Server::EventXrayCompleted</a> (ushort seq, uchar code, float masPre, float masPulse, uchar error)</td></tr>
<tr class="memdesc:gad2b9cbeccf94f41a9ea16d2966c32c33"><td class="mdescLeft">&#160;</td><td class="mdescRight">EventXrayCompleted.  <a href="group___interface_module.html#gad2b9cbeccf94f41a9ea16d2966c32c33">More...</a><br /></td></tr>
<tr class="separator:gad2b9cbeccf94f41a9ea16d2966c32c33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8af888a694a6f5adb226177e6fad8b76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga8af888a694a6f5adb226177e6fad8b76">Server::EventStatus</a> (ushort seq)</td></tr>
<tr class="memdesc:ga8af888a694a6f5adb226177e6fad8b76"><td class="mdescLeft">&#160;</td><td class="mdescRight">EventStatus.  <a href="group___interface_module.html#ga8af888a694a6f5adb226177e6fad8b76">More...</a><br /></td></tr>
<tr class="separator:ga8af888a694a6f5adb226177e6fad8b76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba3f97441b4e3f8e1a68bf7f22239507"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#gaba3f97441b4e3f8e1a68bf7f22239507">Server::Server</a> (QString ipaddress, int port)</td></tr>
<tr class="memdesc:gaba3f97441b4e3f8e1a68bf7f22239507"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group___interface_module.html#gaba3f97441b4e3f8e1a68bf7f22239507" title="Server::Server.">Server::Server</a>.  <a href="group___interface_module.html#gaba3f97441b4e3f8e1a68bf7f22239507">More...</a><br /></td></tr>
<tr class="separator:gaba3f97441b4e3f8e1a68bf7f22239507"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b3aa2579cb1c8cd1d069582c14d0fa6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga4b3aa2579cb1c8cd1d069582c14d0fa6">Server::~Server</a> ()</td></tr>
<tr class="memdesc:ga4b3aa2579cb1c8cd1d069582c14d0fa6"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group___interface_module.html#ga4b3aa2579cb1c8cd1d069582c14d0fa6" title="Server::~Server.">Server::~Server</a>.  <a href="group___interface_module.html#ga4b3aa2579cb1c8cd1d069582c14d0fa6">More...</a><br /></td></tr>
<tr class="separator:ga4b3aa2579cb1c8cd1d069582c14d0fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f73df3e2e82d3124beff64d7043d176"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga5f73df3e2e82d3124beff64d7043d176">Server::Start</a> (void)</td></tr>
<tr class="memdesc:ga5f73df3e2e82d3124beff64d7043d176"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start.  <a href="group___interface_module.html#ga5f73df3e2e82d3124beff64d7043d176">More...</a><br /></td></tr>
<tr class="separator:ga5f73df3e2e82d3124beff64d7043d176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa229a1587514197693274aa0d589344b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#gaa229a1587514197693274aa0d589344b">Server::incomingConnection</a> (qintptr socketDescriptor) override</td></tr>
<tr class="memdesc:gaa229a1587514197693274aa0d589344b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect callback event of tyhe Socket thread.  <a href="group___interface_module.html#gaa229a1587514197693274aa0d589344b">More...</a><br /></td></tr>
<tr class="separator:gaa229a1587514197693274aa0d589344b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d7aa2e30aeb332277b1201e5b7a76f6"><td class="memItemLeft" align="right" valign="top">QList&lt; QString &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga7d7aa2e30aeb332277b1201e5b7a76f6">Server::getProtocolFrame</a> (QByteArray *data)</td></tr>
<tr class="memdesc:ga7d7aa2e30aeb332277b1201e5b7a76f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract the data content from a received frame.  <a href="group___interface_module.html#ga7d7aa2e30aeb332277b1201e5b7a76f6">More...</a><br /></td></tr>
<tr class="separator:ga7d7aa2e30aeb332277b1201e5b7a76f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8be1b2b556480309f35b99aa5a4abe8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga8be1b2b556480309f35b99aa5a4abe8b">Server::sendAck</a> (ushort id, ushort seq, QList&lt; QString &gt; *data)</td></tr>
<tr class="memdesc:ga8be1b2b556480309f35b99aa5a4abe8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to send an Answer frame to Gantry.  <a href="group___interface_module.html#ga8be1b2b556480309f35b99aa5a4abe8b">More...</a><br /></td></tr>
<tr class="separator:ga8be1b2b556480309f35b99aa5a4abe8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9786468ff7d8ad5a443d5a1dd58f4868"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga9786468ff7d8ad5a443d5a1dd58f4868">Server::sendEvent</a> (ushort seq, QList&lt; QString &gt; *data)</td></tr>
<tr class="memdesc:ga9786468ff7d8ad5a443d5a1dd58f4868"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to send an EVENT frame to gantry.  <a href="group___interface_module.html#ga9786468ff7d8ad5a443d5a1dd58f4868">More...</a><br /></td></tr>
<tr class="separator:ga9786468ff7d8ad5a443d5a1dd58f4868"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-slot-members" name="pub-slot-members"></a>
Public Slots</h2></td></tr>
<tr class="memitem:gaf55922f9f78668803fabefb184b100f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#gaf55922f9f78668803fabefb184b100f4">SocketItem::socketRxData</a> ()</td></tr>
<tr class="memdesc:gaf55922f9f78668803fabefb184b100f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data received callback received from the Socket Library.  <a href="group___interface_module.html#gaf55922f9f78668803fabefb184b100f4">More...</a><br /></td></tr>
<tr class="separator:gaf55922f9f78668803fabefb184b100f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga95c27a2e5e42fba9c761422f042f6c7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___interface_module.html#ga95c27a2e5e42fba9c761422f042f6c7b">Server::receivedCommandSlot</a> (ushort id, QByteArray data)</td></tr>
<tr class="memdesc:ga95c27a2e5e42fba9c761422f042f6c7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This signal is Queued connected with the transmitting thread.  <a href="group___interface_module.html#ga95c27a2e5e42fba9c761422f042f6c7b">More...</a><br /></td></tr>
<tr class="separator:ga95c27a2e5e42fba9c761422f042f6c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >This Module implements the communication protocol with the Gantry.</p>
<h1><a class="anchor" id="autotoc_md31"></a>
CONNECTION DETAILS</h1>
<p >The <a class="el" href="class_server.html" title="This class resides into the Main Thread and implements the communication protocol with the Gantry.">Server</a> IP address is: 127.0.0.1@10002.</p>
<p >More than one connection can be established at the same time:</p><ul>
<li>Every connected client is linked to a unique ID identifier;</li>
<li>The <a class="el" href="namespace_application.html" title="Application constants definition.">Application</a> will acknowledge a command only to the Sender of the command;</li>
<li>Every internal EVENT will be forwarded to all the client connected.</li>
</ul>
<h1><a class="anchor" id="autotoc_md32"></a>
PROTOCOL DESCRIPTION</h1>
<p >The protocol is based on the scheme EVENT / ACK:</p><ul>
<li>The EVENT is a command frame;</li>
<li>The ACK is the acknowledge frame to the EVENT frame.</li>
</ul>
<p >The EVENT Frame is the following:</p><ul>
<li>&lt;E SEQ Command PARAM1 ... PARAMN&gt;<ul>
<li>SEQ: is an arbitrary sequence number set by the sender and acknowledge by the receiver;</li>
</ul>
</li>
</ul>
<p >The ACK Frame is</p><ul>
<li>&lt;A SEQ OK/NOK CODE&gt;<ul>
<li>SEQ: is the sequence number of the EVENT frame;</li>
</ul>
</li>
</ul>
<p >The <a class="el" href="namespace_application.html" title="Application constants definition.">Application</a> handles the EVENTS from Gantry in the <a class="el" href="command_8cpp.html">command.cpp</a> file;</p>
<p >The <a class="el" href="namespace_application.html" title="Application constants definition.">Application</a> handles the EVENTS to Gantry in the <a class="el" href="event_8cpp.html">event.cpp</a>;</p>
<h1><a class="anchor" id="autotoc_md33"></a>
EVENTS FROM GANTRY DESCRIPTION</h1>
<p >The Events from Gantry are considered <em>Commands</em> to be executed;</p>
<p >Follows the list of the Implemented Commands:</p>
<ul>
<li>SetExposurePre(): Gantry sets the next Pre Exposure pulse data;</li>
<li>SetExposurePulse(): Gantry sets the next Pulse Exposure data;</li>
<li>SetTomoConfig(): Gantry sets the data for the next Tomo exposure;</li>
<li>StartExposure(): Gantry starts the execution of the Exposure sequence;</li>
<li>AbortExposure(): Gantry aborts the current executing exposure sequence;</li>
<li>GetPostExposure(): Gantry requests the list of the pulses of the last exposure;</li>
</ul>
<blockquote class="doxtable">
<p >&zwj;The <a class="el" href="namespace_application.html" title="Application constants definition.">Application</a> will acknowledge the command ONLY to the client that sent the command; </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md34"></a>
EVENTS TO GANTRY DESCRIPTION</h1>
<p >The Events to Gantry are considered <em>Events</em> to be notified to the Gantry;</p>
<p >Follows a list of the implemented Events:</p>
<ul>
<li>EventMessage(): this is an "error" message generated by the Sedecal Generator;</li>
<li>EventSetXrayEna(): this event notify the Gantry to activate/Deactivate the hardware signal XRAY-ENA;</li>
<li>EventGetPulseData(): this event requests the Pulse data to the Gantry (AEC mode);</li>
<li>EventXrayCompleted(): this event notifies Gantry about the Exposure complete event;</li>
<li>EventStatus(): this event updates Gantry with the Sedecal Generator internal status;</li>
</ul>
<blockquote class="doxtable">
<p >&zwj;The <a class="el" href="namespace_application.html" title="Application constants definition.">Application</a> will forward the EVENTS to all the connected clients. </p>
</blockquote>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga5628fb285275e4bed327cc744a2dda72" name="ga5628fb285275e4bed327cc744a2dda72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5628fb285275e4bed327cc744a2dda72">&#9670;&#160;</a></span>AbortExposure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; QString &gt; Server::AbortExposure </td>
          <td>(</td>
          <td class="paramtype">QList&lt; QString &gt; *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AbortExposure. </p>
<p >This EVENT termines an incoming Exposure.</p>
<p >The frame format is: &lt;E SEQ AbortExposure  &gt;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>No parameters..</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>"OK 0": in case of command success; </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga84af59ce04a2793f2c05d1c47928b8dc" name="ga84af59ce04a2793f2c05d1c47928b8dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga84af59ce04a2793f2c05d1c47928b8dc">&#9670;&#160;</a></span>EventGetPulseData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Server::EventGetPulseData </td>
          <td>(</td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>seq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EventGetPulseData. </p>
<p >This function formats the EventGetPulseData EVENT frame.</p>
<p >This EVENT is sent to Gantry when the <a class="el" href="namespace_application.html" title="Application constants definition.">Application</a> needs to request the Exposure Pulse data, during an AEC sequence,<br  />
after the pre pulse has been completed.</p>
<p >The command frame is: &lt;E SEQ EventGetPulseData &gt; <br  />
</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>seq: is the sequence code of the EVENT frame; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa86610df791c20316db0f6a5865b380e" name="gaa86610df791c20316db0f6a5865b380e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa86610df791c20316db0f6a5865b380e">&#9670;&#160;</a></span>EventMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Server::EventMessage </td>
          <td>(</td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EventMessage. </p>
<p >This function formats the EventMessage EVENT frame.</p>
<p >This EVENT is sent to Gantry always an error message <br  />
is received from the Sedecal Generator.</p>
<p >The command frame is: &lt;E SEQ EventMessage error_message_string &gt;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>seq: is the sequence code of the EVENT frame;<ul>
<li>msg: error message string sent to the Client. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaddcf172531df8b07034e8e014ea96850" name="gaddcf172531df8b07034e8e014ea96850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaddcf172531df8b07034e8e014ea96850">&#9670;&#160;</a></span>EventSetXrayEna()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Server::EventSetXrayEna </td>
          <td>(</td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EventSetXrayEna. </p>
<p >This function formats the EventSetXrayEna EVENT frame.</p>
<p >This EVENT is sent to Gantry when the <a class="el" href="namespace_application.html" title="Application constants definition.">Application</a> needs to change the status of the Gantry XRAY_ENA signal on the Hardware Bus.</p>
<p >The command frame is: &lt;E SEQ EventSetXrayEna signal_stat &gt; <br  />
 Where:</p><ul>
<li>signal_stat:<ul>
<li>0 = request to clear the signal;</li>
<li>1 = request to activate the signal;</li>
</ul>
</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>seq: is the sequence code of the EVENT frame;<ul>
<li>state:<ul>
<li>true: activation request;</li>
<li>false: deactivation request; </li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8af888a694a6f5adb226177e6fad8b76" name="ga8af888a694a6f5adb226177e6fad8b76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8af888a694a6f5adb226177e6fad8b76">&#9670;&#160;</a></span>EventStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Server::EventStatus </td>
          <td>(</td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>seq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EventStatus. </p>
<p >This function formats the EventStatus EVENT frame.</p>
<p >This EVENT is sent to Gantry when the Generator Internal status changes.</p>
<p >The command frame is: &lt;E SEQ EventStatus genstat anodeHu genHu filStat rotSpeed&gt;</p>
<p >Where:</p><ul>
<li>genstat: is the code of the internal generator status. See <a class="el" href="namespace_r2_c_p.html#a20437b93ec8f530c91b3bc8769ec42f2" title="This id the Enumeration code of the GEnerator Internal Status.">R2CP::tGenStatus_Stat</a>;</li>
<li>anodeHu: is the percentage of HU cumulated into the Anode;</li>
<li>genHu: is the percentage of HU cumulated into the Generator;</li>
<li>filStat: 0=OFF, 1 =ON;</li>
<li>rotSpeed: 0=OFF, 1= LOW SPEED, 2=HIGH SPEED;</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>seq: is the sequence code of the EVENT frame; </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad2b9cbeccf94f41a9ea16d2966c32c33" name="gad2b9cbeccf94f41a9ea16d2966c32c33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad2b9cbeccf94f41a9ea16d2966c32c33">&#9670;&#160;</a></span>EventXrayCompleted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Server::EventXrayCompleted </td>
          <td>(</td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>preMas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>pulseMas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EventXrayCompleted. </p>
<p >This function formats the EventXrayCompleted EVENT frame.</p>
<p >This EVENT is sent to Gantry aftyer an Exposure sequence completes.</p>
<p >The command frame is: &lt;E SEQ EventXrayCompleted ris_code masPre masPulse error &gt; <br  />
 Where:</p><ul>
<li>ris_code: is one of the ocdes in <a class="el" href="classexposure_manager.html#ad42f5369b407369d17bd06d1fa07e7ee" title="This is the Enumeration code for the ExposureComplete Event.">exposureManager::tExposureResult</a>;</li>
<li>masPre: total mAs for the pre pulse (if there is one)</li>
<li>masPulse: total mAs for pulse</li>
<li>error: is one of the error codes in the Application::tExposureErrors</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>seq: is the sequence code of the EVENT frame;<ul>
<li>result: is the exposure result code. see <a class="el" href="classexposure_manager.html#ad42f5369b407369d17bd06d1fa07e7ee" title="This is the Enumeration code for the ExposureComplete Event.">exposureManager::tExposureResult</a>;</li>
<li>preMas: total mAs for pre pulse</li>
<li>pulseMas: total mAs for pulse</li>
<li>error: in case of error, this is the error code. See Application::tExposureErrors. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa30eba1ca1ddc4516dd11c20befbeb7d" name="gaa30eba1ca1ddc4516dd11c20befbeb7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa30eba1ca1ddc4516dd11c20befbeb7d">&#9670;&#160;</a></span>GetPostExposure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; QString &gt; Server::GetPostExposure </td>
          <td>(</td>
          <td class="paramtype">QList&lt; QString &gt; *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GetPostExposure. </p>
<p >Gantry sends this command EVENT to request the list of the<br  />
last exposure pulses.</p>
<p >The frame format is: &lt;E SEQ GetPostExposure  &gt;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>No parameters..</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>"OK num_blocks [block1] .. [block-n]"</li>
</ul>
</dd></dl>
<p>Where:</p><ul>
<li>num_blocks: number of available pulse blocks;</li>
<li>block 1-n: pulse data-blocks;</li>
</ul>
<p >The data block format is:[focus, kV, mAs, mA, ms]:</p><ul>
<li>focus: [SMALL/LARGE] is the focal spot used;</li>
<li>kV: kV of the pulse;</li>
<li>mAs of the pulse;</li>
<li>mA: anodic current of the pulse;</li>
<li>ms: endurance in ms of the pulse; </li>
</ul>

</div>
</div>
<a id="ga7d7aa2e30aeb332277b1201e5b7a76f6" name="ga7d7aa2e30aeb332277b1201e5b7a76f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d7aa2e30aeb332277b1201e5b7a76f6">&#9670;&#160;</a></span>getProtocolFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; QString &gt; Server::getProtocolFrame </td>
          <td>(</td>
          <td class="paramtype">QByteArray *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extract the data content from a received frame. </p>
<p >getProtocolFrame</p>
<p >This function extract a list of String Items contained into the parameter. Those items are parts of the Command frame.</p>
<p >Each individual item is separated with a space from the next Item, with the exception of the first and the last item:</p><ul>
<li>the first item can be preceded by the '&lt;' character.</li>
<li>the last item can be followed by the '&gt;' character.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>data: dataframe containing the list of command items; </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="gaa229a1587514197693274aa0d589344b" name="gaa229a1587514197693274aa0d589344b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa229a1587514197693274aa0d589344b">&#9670;&#160;</a></span>incomingConnection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Server::incomingConnection </td>
          <td>(</td>
          <td class="paramtype">qintptr&#160;</td>
          <td class="paramname"><em>socketDescriptor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disconnect callback event of tyhe Socket thread. </p>
<p ><a class="el" href="group___interface_module.html#gaa229a1587514197693274aa0d589344b" title="Disconnect callback event of tyhe Socket thread.">Server::incomingConnection</a>.</p>
<p >Incoming connection slot</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socketDescriptor</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>This Slot is connected to the QTcpServer class connection request. Every Client connection is assigned to a proper thread handling the connection.</p>
<p >When a client is successfully connected, it will receive the '<a class="el" href="group___interface_module.html#ga8af888a694a6f5adb226177e6fad8b76" title="EventStatus.">EventStatus()</a>' as a Welcome frame. </p>

</div>
</div>
<a id="ga8be1b2b556480309f35b99aa5a4abe8b" name="ga8be1b2b556480309f35b99aa5a4abe8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8be1b2b556480309f35b99aa5a4abe8b">&#9670;&#160;</a></span>sendAck()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Server::sendAck </td>
          <td>(</td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QList&lt; QString &gt; *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to send an Answer frame to Gantry. </p>
<p >sendAck</p>
<p >This function sends an Acknowledge frame format to the Client Id</p>
<p >The Parameter shall contain only the Acknowledge item, the function will append the proper structure: </p><blockquote class="doxtable">
<p >&zwj;&lt;A SEQ [data] &gt; </p>
</blockquote>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>id: the client identifier that will receive the Ack frame;<ul>
<li>seq: sequence number of the received command to be acknowledged;</li>
<li>data: the list of items that the function will include in the protocol frame. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9786468ff7d8ad5a443d5a1dd58f4868" name="ga9786468ff7d8ad5a443d5a1dd58f4868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9786468ff7d8ad5a443d5a1dd58f4868">&#9670;&#160;</a></span>sendEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Server::sendEvent </td>
          <td>(</td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QList&lt; QString &gt; *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to send an EVENT frame to gantry. </p>
<p >sendEvent</p>
<p >This function sends an EVENT frame with the format:</p><ul>
<li>&lt;E SEQ [data]&gt;</li>
</ul>
<p >The frame is sent broadcast to all the connected Clients.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>seq: sequence number of the Event ;<ul>
<li>data: the list of parameter's item of the EVENT. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaba3f97441b4e3f8e1a68bf7f22239507" name="gaba3f97441b4e3f8e1a68bf7f22239507"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaba3f97441b4e3f8e1a68bf7f22239507">&#9670;&#160;</a></span>Server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Server::Server </td>
          <td>(</td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>ipaddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="group___interface_module.html#gaba3f97441b4e3f8e1a68bf7f22239507" title="Server::Server.">Server::Server</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>ipaddress: IP where server will be bounded;<ul>
<li>port: bounding port </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gadb5ca8920cd50a220379296dfe2e6de0" name="gadb5ca8920cd50a220379296dfe2e6de0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb5ca8920cd50a220379296dfe2e6de0">&#9670;&#160;</a></span>SetExposurePre()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; QString &gt; Server::SetExposurePre </td>
          <td>(</td>
          <td class="paramtype">QList&lt; QString &gt; *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SetExposurePre. </p>
<p >Gantry sends this command EVENT in order to set the next pre-pulse exposure data in an AEC Exposure type (2D or 3D).</p>
<p >The frame format is: &lt;E SEQ SetExposurePre kV mAs focus tmo&gt;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>kV: (float) kV of the pre pulse;<ul>
<li>mAs: (float) mAs of the pre-pulse;</li>
<li>focus: (string) [LARGE/SMALL] sets the focal spot to be used; <blockquote class="doxtable">
<p >&zwj;NOTE: in case of Tomo sequence, the focus is always Large</p>
</blockquote>
</li>
<li>tmo: timeout waiting AEC data after pre pulse. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The Ack string to be send back to the Gantry:<ul>
<li>"NOK 1": in case of wong number of parameters;</li>
<li>"OK 0": in case of command success; </li>
</ul>
</dd></dl>

</div>
</div>
<a id="gab7155df23582515b6810a60087a2c41d" name="gab7155df23582515b6810a60087a2c41d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab7155df23582515b6810a60087a2c41d">&#9670;&#160;</a></span>SetExposurePulse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; QString &gt; Server::SetExposurePulse </td>
          <td>(</td>
          <td class="paramtype">QList&lt; QString &gt; *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SetExposurePulse. </p>
<p >Gantry sends this command EVENT in order to set the next Pulse exposure data.</p>
<p >Gantry shall set the Pulse exposure data before to starts a Manual exposure (2D or 3D)<br  />
or in AEC to set the pulse after the Pre Pulse is completed. </p><blockquote class="doxtable">
<p >&zwj;This function uses the Synchronization signals and cannot be used as a test exposure. </p>
</blockquote>
<p>The frame format is: &lt;E SEQ SetExposurePulse kV mAs focus &gt;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>kV: (float) ;<ul>
<li>mAs: (float) The <em>Total</em> number of mAs of the Pulse; <blockquote class="doxtable">
<p >&zwj;In case of the Tomo sequence, the mAs of a single pulse is the mAs/n-pulse!</p>
</blockquote>
</li>
<li>focus: (string) : LARGE/SMALL; In case of Tomo only the LARGE FOCUS is used, and this parameter is ignored; </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The Ack string to be send back to the Gantry:<ul>
<li>"NOK 1": in case of wong number of parameters;</li>
<li>"OK 0": in case of command success; </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga509050dae49f7a78cbc974f6c4ddb94b" name="ga509050dae49f7a78cbc974f6c4ddb94b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga509050dae49f7a78cbc974f6c4ddb94b">&#9670;&#160;</a></span>SetExposureTestPulse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; QString &gt; Server::SetExposureTestPulse </td>
          <td>(</td>
          <td class="paramtype">QList&lt; QString &gt; *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SetExposureTestPulse. </p>
<p >Gantry sends this command EVENT in order to set the next Pulse exposure data.</p>
<p >Gantry shall set the Pulse exposure data before to starts a Manual exposure (2D or 3D)<br  />
or after the pre pulse termines and the Pulse data has been calculated.</p>
<p >The frame format is: &lt;E SEQ SetExposurePulse kV mAs focus sync_type grid_use&gt;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>kV: (float) ;<ul>
<li>mAs: (float) The <em>Total</em> number of mAs of the Pulse; <blockquote class="doxtable">
<p >&zwj;In case of the Tomo sequence, the mAs of a single pulse is the mAs/n-pulse!</p>
</blockquote>
</li>
<li>focus: (string) : LARGE/SMALL; In case of Tomo this parameter is ignored;</li>
<li>sync_type: (string) [NO_DETECOR/DETECTOR];<ul>
<li>NO_DETECTOR: the synch signal will be ignored;</li>
<li>DETECTOR: the Generator will synchronize the exposure with the Synch signal of the Hardware Bus; In case of Tomo this parameter is ignored;</li>
</ul>
</li>
<li>grid_use: (string) grid synch: NO_GRID/GRID<ul>
<li>NO_GRID: the Generator will ignore the Grid synchronization;</li>
<li>GRID: the Generator will synchronize the exposure with the Grid signal of the Hardware Bus; In case of Tomo this parameter is ignored; </li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The Ack string to be send back to the Gantry:<ul>
<li>"NOK 1": in case of wong number of parameters;</li>
<li>"OK 0": in case of command success; </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga776a27e6d208ae33ec73c7b26e4fa108" name="ga776a27e6d208ae33ec73c7b26e4fa108"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga776a27e6d208ae33ec73c7b26e4fa108">&#9670;&#160;</a></span>SetTomoConfig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; QString &gt; Server::SetTomoConfig </td>
          <td>(</td>
          <td class="paramtype">QList&lt; QString &gt; *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SetTomoConfig. </p>
<p >Gantry sends this command EVENT in order to set the Tomo configuration.<br  />
The Tomo configuration is composed by the Number of pulses, number of pulse-skip<br  />
and the maximum integration time.</p>
<p >The frame format is: &lt;E SEQ SetTomoConfig n_pulses n_skip tmo&gt;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>n_pulses: (uchar) Number of <em>effective</em> tomo pulses in the scan;<ul>
<li>n_skip: (ushort) Number of Detector Exposure Window the generator shall skip before to start XRAY pulses;</li>
<li>tmo (ushort) Maximum integration time in ms</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The Ack string to be send back to the Gantry:<ul>
<li>"NOK 1": in case of wong number of parameters;</li>
<li>"OK 0": in case of command success; </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga5f73df3e2e82d3124beff64d7043d176" name="ga5f73df3e2e82d3124beff64d7043d176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f73df3e2e82d3124beff64d7043d176">&#9670;&#160;</a></span>Start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Server::Start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start. </p>
<p >Starts the Client connection listening</p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>True: listening successfully started;</li>
<li>flase: error in activate the listening; </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ga9264416ca8eec95129b90b5ecc31e03a" name="ga9264416ca8eec95129b90b5ecc31e03a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9264416ca8eec95129b90b5ecc31e03a">&#9670;&#160;</a></span>StartExposure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt; QString &gt; Server::StartExposure </td>
          <td>(</td>
          <td class="paramtype">QList&lt; QString &gt; *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>StartExposure. </p>
<p >Gantry sends this command EVENT in order to start a given Exposure.<br  />
Possible Exposures are:</p><ul>
<li>2D: is a Manual single 2D pulse exposure;</li>
<li>2DAEC: is a 2D exposure with pre-pulse and a second pulse based on the pre;</li>
<li>3D: i a Manual 3D exposure (tomo);</li>
<li>3DAEC: is a 3D exposure with pre-pulse and a subsequent tomo scan based on the pre;</li>
</ul>
<p >The frame format is: &lt;E SEQ StartExposure exposure_type &gt;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>exposure_type: (string) [2D/2DAEC/3D/3DAEC];</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<ul>
<li>"NOK 1": in case of wong number of parameters;</li>
<li>"NOK 2": in case of not Idle Status;</li>
<li>"OK 0": in case of command success; </li>
</ul>

</div>
</div>
<a id="ga4b3aa2579cb1c8cd1d069582c14d0fa6" name="ga4b3aa2579cb1c8cd1d069582c14d0fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4b3aa2579cb1c8cd1d069582c14d0fa6">&#9670;&#160;</a></span>~Server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Server::~Server </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="group___interface_module.html#ga4b3aa2579cb1c8cd1d069582c14d0fa6" title="Server::~Server.">Server::~Server</a>. </p>
<p >When the server should be destroyed, it shall disconnect all the clients already connected. </p>

</div>
</div>
<h2 class="groupheader">Public Slots</h2>
<a id="ga95c27a2e5e42fba9c761422f042f6c7b" name="ga95c27a2e5e42fba9c761422f042f6c7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga95c27a2e5e42fba9c761422f042f6c7b">&#9670;&#160;</a></span>receivedCommandSlot</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Server::receivedCommandSlot </td>
          <td>(</td>
          <td class="paramtype">ushort&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QByteArray&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This signal is Queued connected with the transmitting thread. </p>
<p >receivedCommandSlot</p>
<p >This function decodes the data frame providing a list of decoded items that make part of a received EVENT.</p>
<p >The list of the Item is further handled by the specific EVENT callback in order to be correctly executed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">-</td><td>id: the client identifier that sent the EVENT;<ul>
<li>data: command data stream. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaf55922f9f78668803fabefb184b100f4" name="gaf55922f9f78668803fabefb184b100f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf55922f9f78668803fabefb184b100f4">&#9670;&#160;</a></span>socketRxData</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SocketItem::socketRxData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Data received callback received from the Socket Library. </p>
<p ><a class="el" href="group___interface_module.html#gaf55922f9f78668803fabefb184b100f4" title="Data received callback received from the Socket Library.">SocketItem::socketRxData</a>.</p>
<p >This is the handler of the data reception of a given socket.</p>
<p >When a data frame is received, it is decoded and the internal command string is <br  />
forwarded to the Command function handler through the signal '<a class="el" href="class_socket_item.html#a1781b9450dbdf4cf1fd7c9935a314e4c" title="For every decoded command received the server sends this signal to the Application.">receivedCommandSgn()</a>'.</p>
<p >The function is able to handle queued frames contained in a single data streaming.</p>
<p >A valid frame shall be a set of string within the &lt; &gt; delimiters. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
