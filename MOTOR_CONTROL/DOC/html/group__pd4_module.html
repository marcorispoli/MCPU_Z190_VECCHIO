<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gantry Motor Control Software Documentation: Nanotec PD4 Device implementation Module.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Gantry Motor Control Software Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Nanotec PD4 Device implementation Module.<div class="ingroups"><a class="el" href="group__nanotec_module.html">Nanotec Devices Implementation module</a></div></div></div>
</div><!--header-->
<div class="contents">
<p >This Module implements the communication protocol with the PD4 Nanotec Motor Device.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
MODULE OVERVIEW</h1>
<p >This module connects a PD4 Nanotec based motor device handling all the CANOpen based feature.</p>
<p >The module has been developed to be subclassed by a Device specific implementation class.</p>
<p >The module allows to:</p><ul>
<li>Configure the whole device internal registers;</li>
<li>Handle the Fault conditions;</li>
<li>Activate a positioning procedure;</li>
<li>Activate the zero setting procedure;</li>
<li>Upload an optional nanoj program;</li>
<li>Activate a nanoj program;</li>
<li>Handle safety inputs;</li>
</ul>
<h1><a class="anchor" id="autotoc_md17"></a>
DEVICE CONFIGURATION</h1>
<p >The module handles a set of configuration Register Vectors in order to customize the motor behaviour.</p>
<p >The Register Vectors are:</p><ul>
<li>pd4Nanotec::registerVectors.configVector: this is a register vector that is uploaded at the startup (if necessary) and stored into the device;</li>
<li>pd4Nanotec::registerVectors.runtimeVector: this is a register vector that is always uploaded at the startup;</li>
<li>pd4Nanotec::registerVectors.zeroSettingVector: this is a register vector that is uploaded at the beginning of a zero setting procedure;</li>
</ul>
<p >The Module provides the tools to configure a NanoJ program to be executed.</p>
<p >The Module provides to configure the Digital inputs to act as safety motor interruption.</p>
<h2><a class="anchor" id="autotoc_md18"></a>
REGISTER VECTOR DESCRIPTION</h2>
<p >The Register Vectors are actually Arrays of items of type <a class="el" href="structpd4_nanotec_1_1___o_d___init_vector.html">pd4Nanotec::_OD_InitVector</a>.<br  />
A valid Register Vector shall mandatory termines with the END_ODVECTOR macro.</p>
<pre class="fragment"> NOTE: In case the END_ODVECTOR should be omitted, the program may crash
 due to a possible infinite loops.
</pre><h2><a class="anchor" id="autotoc_md19"></a>
CONFIGURATION REGISTER VECTOR DESCRIPTION</h2>
<p >This Register Vector should be a const vector of Motor registers that<br  />
needs to be uploaded once and stored into the Motor Device.<br  />
 The Module Uploads and Stores the registers soon after the start-up<br  />
if the Module detects a different checksum from the Device list and the <br  />
coded list. In case the checksum should match, the register vector will not be<br  />
uploaded, saving startup time and can network occupancy.<br  />
 </p>
<h2><a class="anchor" id="autotoc_md20"></a>
RUNTIME REGISTER VECTOR DESCRIPTION</h2>
<p >This register vector is a list of device register that will be always upload <br  />
after every startup.</p>
<pre class="fragment"> NOTE: although this is an optional feature, however there is some internal register\n
 that cannot be stored for an unknown reason, not declared by Nanotec. Those registers\n
 consequently needs to be refreshed after the system startup.

 NOTE: the known register that refuses to be stored are:
 - OD_3250_02
</pre><p> This Register vector can be declared as a const vector because <br  />
it will not be changed at runtime.<br  />
 </p>
<h2><a class="anchor" id="autotoc_md21"></a>
ZERO SETTING REGISTER VECTOR</h2>
<p >This register vector is a list of register that characterize the <br  />
zero setting behavior. Those register will be uploaded at the beginning <br  />
of the zero setting procedure.<br  />
 This Register vector can be declared as a const vector because <br  />
it will not be changed at runtime.<br  />
</p>
<h2><a class="anchor" id="autotoc_md22"></a>
NANOJ PROGRAM</h2>
<p >The module allows to automatically upload the nanoj program at the startup. The pd4Nanotec::nanojStr.vector shall be assigned to the array of bytes <br  />
of the binary nanojprogram.</p>
<p >The module provides the method <a class="el" href="classpd4_nanotec.html#ac7de36eaf506d3ee0971c56c83e398b4">pd4Nanotec::setNanojVector()</a> in order to<br  />
assigne the binary array to the module pointer.</p>
<p >The Module checks the checksum of the program and compares it with the last stored into the flash memory of the Motor device. In case it should <br  />
be different, the module automatically upload the new program.</p>
<p >The <a class="el" href="namespace_application.html" title="Application constants definition.">Application</a> can force to upload and store a new program with the method:</p><ul>
<li><a class="el" href="classpd4_nanotec.html#accd7f37d4990e4036fb54478dcb2c24f">pd4Nanotec::uploadNanojProgram()</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md23"></a>
SAFETY CONFIGURATION</h2>
<p >The module allows to use the Digital Inputs as a software safety Motor Interruption.</p>
<p >The PD4 device provides four digital inputs. The Subclassing application can set the mask and the value corresponding with the stop condition:</p><ul>
<li>Stop Condition: (DI &amp; SAFE_MASK) == SAFE_VAL;</li>
</ul>
<p >The Safety Stop condition causes an immediate Motor Stop. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
